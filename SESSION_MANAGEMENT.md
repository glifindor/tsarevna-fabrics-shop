# üïí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ JWT —Å–µ—Å—Å–∏—è–º–∏ - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏:
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏**: 30 –¥–Ω–µ–π
- **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ**: –∑–∞ 7 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**: –∑–∞ 24 —á–∞—Å–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏:**
```typescript
// –ü—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
token.iat = Math.floor(Date.now() / 1000); // –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
token.exp = Math.floor(Date.now() / 1000) + (30 * 24 * 60 * 60); // +30 –¥–Ω–µ–π
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```typescript
// –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
const timeLeft = token.exp - now;

// –ï—Å–ª–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –º–µ–Ω—å—à–µ 7 –¥–Ω–µ–π
if (timeLeft < 7 * 24 * 60 * 60) {
  // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –Ω–∞ –Ω–æ–≤—ã–µ 30 –¥–Ω–µ–π
  token.exp = now + (30 * 24 * 60 * 60);
}
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Ç–æ–∫–µ–Ω –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–µ–∫—à–∏–π
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üéØ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö

### ‚úÖ **–ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–∑–∞—Ö–æ–¥–∏—Ç —á–∞—â–µ —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é):**
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–µ—Å—Å–∏—è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç
- **–ú–µ—Ö–∞–Ω–∏–∑–º**: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è < 7 –¥–Ω–µ–π

### ‚è∞ **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (30+ –¥–Ω–µ–π –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏):**
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- **UX**: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞" ‚Üí –∫–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ"

### ‚ö†Ô∏è **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç —Ä–µ–¥–∫–æ (1-2 —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü):**
- **–ó–∞ 24 —á–∞—Å–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è**: –ñ–µ–ª—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞
- **–û–ø—Ü–∏–∏**: "–ü—Ä–æ–¥–ª–∏—Ç—å —Å–µ—Å—Å–∏—é" –∏–ª–∏ "–°–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"
- **–ü—Ä–æ–¥–ª–µ–Ω–∏–µ**: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. **NextAuth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`src/lib/auth.ts`):
```typescript
session: {
  maxAge: 30 * 24 * 60 * 60, // 30 –¥–Ω–µ–π
  updateAge: 24 * 60 * 60,   // –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
},
```

### 2. **SessionManager –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** (`src/components/SessionManager.tsx`):
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–æ–≥–∏–Ω

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Layout** (`src/app/layout.tsx`):
```typescript
<SessionProvider>
  <SessionManager /> {/* –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö */}
  {/* –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã */}
</SessionProvider>
```

## üëÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç (UX)

### üü¢ **–û–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω):
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è < 7 –¥–Ω–µ–π
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–±–æ–µ–≤

### üü° **–†–µ–¥–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ö–æ–¥–∏–ª 23 –¥–Ω—è
2. –ó–∞ 24 —á–∞—Å–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è: –∂–µ–ª—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞
3. –ö–ª–∏–∫ "–ü—Ä–æ–¥–ª–∏—Ç—å —Å–µ—Å—Å–∏—é" ‚Üí –Ω–æ–≤—ã–µ 30 –¥–Ω–µ–π
4. –ö–ª–∏–∫ "–°–∫—Ä—ã—Ç—å" ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏—Å—á–µ–∑–∞–µ—Ç

### üî¥ **–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞**:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ö–æ–¥–∏–ª 30+ –¥–Ω–µ–π
2. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–π—Ç–∏: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ
3. –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤—ã–±–æ—Ä: "–í–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ"

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω**
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞**

### **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:**
- –¢–æ–∫–µ–Ω –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–µ–∫—à–∏–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ—Ç—Å—è
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
logger.log('New JWT token created for user:', user.email);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
logger.log('JWT token refreshed for user:', user.email, 'Time left was:', timeLeft);

// –û—à–∏–±–∫–∏
logger.error('Error refreshing token:', error);
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)

### **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏:**
```typescript
// –í src/lib/auth.ts
maxAge: 30 * 24 * 60 * 60, // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
```

### **–í—Ä–µ–º—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
```typescript
// –ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—Ç—å –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω
if (timeLeft < 7 * 24 * 60 * 60) { // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω–æ–µ
```

### **–í—Ä–µ–º—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**
```typescript
// –í src/components/SessionManager.tsx
const warningTime = 24 * 60 * 60 * 1000; // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω–æ–µ
```

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### **–ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞ —á–∞—Å—Ç—ã–µ –≤—ã—Ö–æ–¥—ã**
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```typescript
if (timeLeft < 14 * 24 * 60 * 60) { // –û–±–Ω–æ–≤–ª—è—Ç—å –∑–∞ 14 –¥–Ω–µ–π
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
```typescript
const warningTime = 3 * 24 * 60 * 60 * 1000; // –ó–∞ 3 –¥–Ω—è
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é**
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏:
```typescript
}, 60 * 60 * 1000); // –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–π —á–∞—Å –≤–º–µ—Å—Ç–æ 30 –º–∏–Ω—É—Ç
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤

### **–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**
- –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
- –ü—Ä–æ—Ü–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–¥–ª–µ–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ª–æ–≥–∞—É—Ç–æ–≤

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–∞–π—Ç–æ–≤:**
- ‚úÖ **30 –¥–Ω–µ–π** –æ–±—â–µ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
- ‚úÖ **7 –¥–Ω–µ–π** –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ **24 —á–∞—Å–∞** –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### **–î–ª—è –≤—ã—Å–æ–∫–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- ‚ö†Ô∏è **7 –¥–Ω–µ–π** –æ–±—â–µ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
- ‚ö†Ô∏è **1 –¥–µ–Ω—å** –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚ö†Ô∏è **6 —á–∞—Å–æ–≤** –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### **–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- üü¢ **90 –¥–Ω–µ–π** –æ–±—â–µ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
- üü¢ **14 –¥–Ω–µ–π** –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- üü¢ **3 –¥–Ω—è** –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

---

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è e-commerce —Å–∞–π—Ç–∞** - –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —É–¥–æ–±—Å—Ç–≤–æ–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é! ‚úÖ 